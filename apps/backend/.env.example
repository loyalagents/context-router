# ==============================================================================
# BACKEND (NestJS) ENVIRONMENT CONFIGURATION
# ==============================================================================
# SETUP: Copy this file to .env and fill in your values
#   cp .env.example .env
# ==============================================================================

# Application
NODE_ENV=development
APP_PORT=3000

# Database
# For Docker: Use 'postgres' as hostname (container name)
# For local: Use 'localhost'
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/context_router?schema=public
# Note: postgresql://<DATABASE_USER>:<DATABASE_PASSWORD>@<HOSTNAME>:<DATABASE_PORT>/<DATABASE_NAME>?schema=public

# GraphQL
GRAPHQL_PLAYGROUND=true
GRAPHQL_DEBUG=true

# Auth0 Configuration (Backend)
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_AUDIENCE=https://your-api-audience
AUTH0_ISSUER=https://your-tenant.auth0.com/
AUTH0_CLIENT_ID=your-auth0-client-id
AUTH0_CLIENT_SECRET=your-auth0-client-secret
AUTH0_MANAGEMENT_API_AUDIENCE=https://your-tenant.auth0.com/api/v2/

# JWT Configuration (optional, for custom JWTs)
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=1h

# User Sync Strategy (ON_LOGIN, ON_DEMAND, BACKGROUND)
AUTH0_SYNC_STRATEGY=ON_LOGIN

# CORS Configuration
# Update this to include your frontend URL (default: http://localhost:3002)
CORS_ORIGIN=http://localhost:3000,http://localhost:3002

# Vertex AI Configuration
GCP_PROJECT_ID=your-actual-gcp-project-id
VERTEX_REGION=us-central1
VERTEX_MODEL_ID=gemini-2.5-flash-lite

# Document Upload Configuration
DOC_UPLOAD_MAX_BYTES=10485760
DOC_UPLOAD_MAX_SUGGESTIONS=25

# MCP OAuth Configuration (for Claude/ChatGPT native OAuth flow)
# The public-facing URL where the MCP server is accessible
# Used for registration_endpoint in OAuth metadata (must be a real, reachable URL)
MCP_SERVER_URL=https://your-cloud-run-url.a.run.app
# Resource identifier - should match your Auth0 API identifier
# This is not used yet, we are just using AUTH0_AUDIENCE for now
MCP_RESOURCE=https://context-router.example.com
# Pre-registered Auth0 public client_id for MCP connectors (PKCE, no secret)
AUTH0_MCP_PUBLIC_CLIENT_ID=your-mcp-public-client-id
# Rate limit for /oauth/register endpoint (requests per minute per IP)
MCP_OAUTH_REGISTER_RATE_LIMIT=30